---
import NotAvailableComponent from '../components/NotAvailableComponent.astro'
import DefaultHtml from '../htmls/DefaultHtml.astro'
import MainHtml from '../htmls/MainHtml.astro'
import MainLayout from '../layouts/MainLayout.astro'
import { supabase } from '../lib/supabase'

const { data } = await supabase.from('profile').select()

const profile = data?.at(0)
---

{
  profile == null ? (
    <DefaultHtml>
      <NotAvailableComponent />
    </DefaultHtml>
  ) : (
    <MainHtml profile={profile}>
      <MainLayout profile={profile} />
    </MainHtml>
  )
}
